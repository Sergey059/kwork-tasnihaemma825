(() => {
  "use strict";

  document.addEventListener("DOMContentLoaded", function () {
    const burger = document.querySelector(".burger");
    const nav = document.querySelector(".nav");
    const body = document.querySelector("body");
    const valueInput = document.querySelector("#value");
    const resultInput = document.querySelector("#result");
    const dropdownButton = document.getElementById("dropdown-btn");
    const dropdownList = document.getElementById("dropdown-list");
    const dropdownIcon = document.getElementById("dropdown-icon");
    const tokenName = document.getElementById("token");
    const popup = document.querySelector(".popup");

    burger.onclick = function () {
      burger.classList.toggle("active");
      if (burger.classList.contains("active")) {
        nav.classList.add("active");
        body.classList.add("no-scroll");
      } else {
        burger.classList.remove("active");
        nav.classList.remove("active");
        body.classList.remove("no-scroll");
      }
    };

    window.addEventListener("resize", function () {
      if (window.innerWidth >= 808) {
        burger.classList.remove("active");
        nav.classList.remove("active");
        body.classList.remove("no-scroll");
      }
    });

    if (valueInput && resultInput) {
      valueInput.addEventListener("input", function (event) {
        const value = +event.target.value;
        resultInput.value = value > 0 ? 0.1 * value : "";
      });
    }

    if (dropdownButton) {
      dropdownButton.addEventListener("click", function () {
        dropdownList.style.display =
          dropdownList.style.display === "none" ||
          dropdownList.style.display === ""
            ? "block"
            : "none";
      });
    }

    if (dropdownList) {
      dropdownList.addEventListener("click", function (event) {
        if (event.target.tagName === "LI") {
          tokenName.textContent = event.target.textContent;
          dropdownList.style.display = "none";
        }
      });
    }

    if (popup) {
      document.addEventListener(
        "click",
        function (event) {
          if (
            event.target.classList.contains("btn--popup") ||
            event.target.classList.contains("popup__close") ||
            event.target.classList.contains("popup")
          ) {
            popup.classList.toggle("popup--open");
            popup.classList.toggle("popup--close");
          }
        },
        true
      );
    }
  });
})();
